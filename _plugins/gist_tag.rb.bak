module Jekyll
  class GistTag < Liquid::Tag
    def initialize(tag_name, text, tokens)
      super
      @text = text
    end

    def render(context)
      # Kode ini akan mengubah {% gist user/id %} menjadi link biasa
      # agar tidak error di Ruby lama.
      gist_id = @text.strip
      "<div><a href='https://gist.github.com/#{gist_id}' target='_blank'>Lihat Gist di GitHub (#{gist_id})</a></div>"
    end
  end
end

Liquid::Template.register_tag('gist', Jekyll::GistTag)
